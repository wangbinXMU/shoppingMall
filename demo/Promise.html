<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Promise</title>
</head>

<body>
  <div>
    <h2>Promise</h2>
  </div>
  <script>
    let checkLogin = function () {
      // resolve表示接口执行成功要执行的回调
      // reject表示接口执行出错要执行的回调
      return new Promise(function (resolve, reject) {
        let flag;
        if (flag=true) {
          resolve({
            status: 0,
            result: true,
          })
        } else {
          reject('error')
        }
      })
    }
    let getUserInfo = ()=>{
      return new Promise((resolve,reject)=>{
        let userInfo = {
          userId:'101'
        }
        resolve(userInfo)
      })
    }
    let getName = ()=>{
      return new Promise((resolve,reject)=>{
        let name = {
          'name':'wangbin',
        }
        resolve(name);
      })
    }
    checkLogin().then(res=>{
      if(res.status === 0){
        return getUserInfo();
      } 
    }).catch(err=>{
      console.log(`error:${err}`);
    }).then((res2)=>{
      console.log(`userId:${res2.userId}`);
      return getName();
    }).then((res3)=>{
      console.log(`name:${res3.name}`);
    })




  </script>
</body>

</html>